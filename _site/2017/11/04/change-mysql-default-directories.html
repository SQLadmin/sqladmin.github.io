<!DOCTYPE html><html lang="en" ><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><link href="/assets/css/syntax.css" rel="stylesheet"><title>How To Change MySQL Default Data,Binlog,Error Log Directories | The Data Guy</title><meta name="generator" content="Jekyll v4.0.0" /><meta property="og:title" content="How To Change MySQL Default Data,Binlog,Error Log Directories" /><meta name="author" content="Bhuvanesh" /><meta property="og:locale" content="en_US" /><meta name="description" content="Going to change MySQL default data,binlog, error log directories and slow log directories, then this is the please to take a look for few minutes." /><meta property="og:description" content="Going to change MySQL default data,binlog, error log directories and slow log directories, then this is the please to take a look for few minutes." /><meta property="og:site_name" content="The Data Guy" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2017-11-04T11:45:29+00:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="How To Change MySQL Default Data,Binlog,Error Log Directories" /><meta name="twitter:site" content="@bhuvithedataguy" /><meta name="twitter:creator" content="@https://twitter.com/BhuviTheDataGuy" /> <script type="application/ld+json"> {"dateModified":"2017-11-04T11:45:29+00:00","datePublished":"2017-11-04T11:45:29+00:00","url":"/2017/11/04/change-mysql-default-directories","mainEntityOfPage":{"@type":"WebPage","@id":"/2017/11/04/change-mysql-default-directories"},"@type":"BlogPosting","author":{"@type":"Person","name":"Bhuvanesh"},"description":"Going to change MySQL default data,binlog, error log directories and slow log directories, then this is the please to take a look for few minutes.","headline":"How To Change MySQL Default Data,Binlog,Error Log Directories","@context":"https://schema.org"}</script><style> *,:after,:before{box-sizing:border-box;background-color:inherit;color:inherit;margin:0;padding:0}body{font-family:system-ui, sans-serif;-webkit-font-smoothing:antialiased;text-rendering:optimizeLegibility;line-height:1.7;font-size:1rem;color:#16171a}nav ul{border-right:1px solid #edf2f7}a{color:#000;text-decoration-skip-ink:auto;text-decoration:underline}pre{margin:.5rem 0;padding:.5rem}.post p{margin:.5rem 0}.post h1,.post h2,.post h3,.post h4{margin:1rem 0}.post h2:first-child,.project h2:first-child,.photo h2:first-child{margin-top:0}.meta{margin:2rem 0}code,pre{background:#ecedee}code{padding:.1rem}pre code{border:none}pre{padding:1rem;overflow-x:auto}img{max-width:100%}hr{background:#000;height:1px;border:0}header{flex-basis:10rem;flex-grow:1;position:relative}header a{text-decoration:none}header li{margin-bottom:.2rem;text-align:right;margin-right:2rem}header a.active{font-weight:bold}header,section{padding:1rem}blockquote{font-style:italic;border-left:5px solid #ececec;padding-left:1rem}h1,h2,h3,h4,h5{line-height:1;margin:1rem 0;font-weight:600}section h1:first-child{margin-top:0}strong,b{font-weight:bold}.photos ul{list-style:none}.photos li{margin-bottom:1.5rem}.photo picture,.project picture{margin-bottom:0.5rem}.posts ul,header ul{list-style:none}.posts li{align-items:center;display:flex;justify-content:space-between;margin-bottom:.5rem}.posts li a,.posts li div,.projects li a{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;text-decoration:none}.posts li time,.projects li time{padding-left:1rem;white-space:nowrap;font-variant-numeric:tabular-nums}main{display:flex;flex-wrap:wrap;max-width:60rem;margin:2rem auto;padding:1rem}@media screen and (max-width: 45rem){header li{display:inline;margin-right:1rem}.logo{padding-bottom:1rem}header ul{border-bottom:1px solid #edf2f7;padding-bottom:2rem}nav ul{border-right:0px}.photos ul{margin-top:0.5rem}}section{flex-basis:0;flex-grow:999;min-width:70%;display:flex;flex-direction:column}figcaption{font-size:smaller}#share-bar{font-size:20px}#share-bar h4{margin-bottom:10px;font-weight:500}.share-button{margin:0px;margin-bottom:10px;margin-right:3px;border:1px solid #D3D6D2;padding:5px 10px 5px 10px}.share-button:hover{opacity:1;color:#ffffff}.fa-facebook-official{color:#3b5998}.fa-facebook-official:hover{background-color:#3b5998}.fa-twitter{color:#55acee}.fa-twitter:hover{background-color:#55acee}.fa-google-plus{color:#dd4b39}.fa-google-plus:hover{background-color:#dd4b39}.fa-pinterest-p{color:#cb2027}.fa-pinterest-p:hover{background-color:#cb2027}.fa-tumblr{color:#32506d}.fa-tumblr:hover{background-color:#32506d}.fa-reddit-alien{color:#ff4500}.fa-reddit-alien:hover{background-color:#ff4500}.fa-linkedin{color:#007bb5}.fa-linkedin:hover{background-color:#007bb5}.fa-envelope{color:#444444}.fa-envelope:hover{background-color:#444444}</style></head><body><main role="main"><header role="banner"><h1 class="logo">The Data Guy</h1><div class="page-author h-card p-author"><img src="/assets/circle-cropped.png" class="author-avatar u-photo" alt="Bhuvanesh"></div><nav role="navigation"><ul><li><a href="/" >Home</a></li><li><a href="/posts/" >Posts</a></li><li><a href="/categories/" >Categories</a></li><li><a href="/tags/" >Tags</a></li><li><a href="https://medium.com/@bhuvithedataguy" >Medium Blog</a></li><li><a href="/search" >Search Here</a></li></ul></nav></header><section class="post"><h2>How To Change MySQL Default Data,Binlog,Error Log Directories</h2><p><img src="/assets/mysql-change-default-directories.jpg" alt="change mysql default data,binlog, error log directories" /></p><p>MySQL Change default directories</p><p>While reading this heading everybody things like, yeah its pretty old topic, we can get many articles by googling. But you know what sometimes well known things never work for us. This time it happened for me, my bad. I have done this many times. But most of us changed the default Data Directory only. Only a few of us thinking about change MySQL default data,binlog, error log directories.</p><p>I can easily change the Data directory, But while enabling binlog, and error log I got an error.</p><figure class="highlight"><pre><code class="language-shell" data-lang="shell">mysqld: File <span class="s1">'/mysql/binlog/mysql-bin.index'</span> not found <span class="o">(</span>Errcode: 13<span class="o">)</span></code></pre></figure><p>So this is the reason for wrote this blog.</p><h2 id="my-server-setup">My Server Setup:</h2><p><strong>OS:</strong> Ubuntu 14.04LTS 64Bit</p><p><strong>MySQL:</strong> 5.5.58</p><h2 id="destination-directories">Destination Directories:</h2><p><strong>Data:</strong> /mysql/data</p><p><strong>Binlog: </strong>/mysql/data</p><p><strong>ErrorLog:</strong> /mysql/error</p><p><strong>SlowLog:</strong> /mysql/sowlog</p><h3 id="create-the-directories">Create the Directories:</h3><figure class="highlight"><pre><code class="language-shell" data-lang="shell"><span class="nb">mkdir</span> <span class="nt">-p</span> /mysql/data
<span class="nb">mkdir</span> <span class="nt">-p</span> /mysql/binlog
<span class="nb">mkdir</span> <span class="nt">-p</span> /mysql/error
<span class="nb">mkdir</span> <span class="nt">-p</span> /mysql/sowlog</code></pre></figure><p>Set permission:</p><figure class="highlight"><pre><code class="language-shell" data-lang="shell"><span class="nb">chown</span> <span class="nt">-R</span> mysql:mysql /mysql/
<span class="nb">chmod</span> <span class="nt">-R</span> 600 /mysql</code></pre></figure><p>Sync the data from old data directory to the new directory.</p><figure class="highlight"><pre><code class="language-shell" data-lang="shell">service mysql stop
<span class="nb">sudo </span>rsync <span class="nt">-av</span> /var/lib/mysql/<span class="k">*</span> /mysql/data/</code></pre></figure><h3 id="edit-the-mycnf-file">Edit the my.cnf file</h3><figure class="highlight"><pre><code class="language-shell" data-lang="shell"><span class="o">[</span>mysqld]
<span class="c">#Data</span>
datadir <span class="o">=</span> /mysql/data/
<span class="c">#Binlog</span>
log_bin <span class="o">=</span> /mysql/binlog/mysql_bin
<span class="c">#Errorlog</span>
log_error <span class="o">=</span> /mysql/error/mysql_error.log
<span class="c">#slowlog</span>
slow_query_log_file <span class="o">=</span> /mysql/sowlog/mysql_slow.log
<span class="o">[</span>mysql]
port <span class="o">=</span> 3306
socket <span class="o">=</span> /mysql/data/mysql.sock</code></pre></figure><p>Now its time to modify the apparmor files.</p><figure class="highlight"><pre><code class="language-shell" data-lang="shell">vi /etc/apparmor.d/usr.sbin.mysqld

<span class="c">#fine the below lines</span>
/var/lib/mysql r,
/var/lib/mysql/<span class="k">**</span> rwk,

<span class="c">#replace with</span>
/mysql r,
/mysql/<span class="k">**</span> rwk,</code></pre></figure><p>Thats it, now start mysql.</p><figure class="highlight"><pre><code class="language-shell" data-lang="shell">service mysql start</code></pre></figure><span class="meta"><time datetime="2017-11-04T11:45:29+00:00">November 4, 2017</time> &middot; <a href="/tags/#linux">linux</a>, <a href="/tags/#mysql">mysql</a>, <a href="/tags/#ubuntu">ubuntu</a></span><hr> <!--<span class="meta"><time datetime="2017-11-04T11:45:29+00:00">November 4, 2017</time> &middot; <a class="post" href="/tag/linux">linux</a>, <a class="post" href="/tag/mysql">mysql</a>, <a class="post" href="/tag/ubuntu">ubuntu</a></span> --></section></main></body></html>
