<!DOCTYPE html><html lang="en" ><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><link href="/assets/css/syntax.css" rel="stylesheet"><title>SQLServer Backup with dbatools vs Olahallengren | The Data Guy</title><meta name="generator" content="Jekyll v4.0.0" /><meta property="og:title" content="SQLServer Backup with dbatools vs Olahallengren" /><meta name="author" content="Bhuvanesh" /><meta property="og:locale" content="en_US" /><meta name="description" content="A comparison for dbatools vs olahallengren for backup the SQL Server databases. We explained the pros and cons for using both tools." /><meta property="og:description" content="A comparison for dbatools vs olahallengren for backup the SQL Server databases. We explained the pros and cons for using both tools." /><meta property="og:site_name" content="The Data Guy" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2017-10-19T15:08:27+00:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="SQLServer Backup with dbatools vs Olahallengren" /><meta name="twitter:site" content="@bhuvithedataguy" /><meta name="twitter:creator" content="@https://twitter.com/BhuviTheDataGuy" /> <script type="application/ld+json"> {"dateModified":"2017-10-19T15:08:27+00:00","datePublished":"2017-10-19T15:08:27+00:00","url":"/2017/10/19/backup-with-dbatools-ola-hallengren","mainEntityOfPage":{"@type":"WebPage","@id":"/2017/10/19/backup-with-dbatools-ola-hallengren"},"@type":"BlogPosting","author":{"@type":"Person","name":"Bhuvanesh"},"description":"A comparison for dbatools vs olahallengren for backup the SQL Server databases. We explained the pros and cons for using both tools.","headline":"SQLServer Backup with dbatools vs Olahallengren","@context":"https://schema.org"}</script><style> *,:after,:before{box-sizing:border-box;background-color:inherit;color:inherit;margin:0;padding:0}body{font-family:system-ui, sans-serif;-webkit-font-smoothing:antialiased;text-rendering:optimizeLegibility;line-height:1.7;font-size:1rem;color:#16171a}nav ul{border-right:1px solid #edf2f7}a{color:#000;text-decoration-skip-ink:auto;text-decoration:underline}pre{margin:.5rem 0;padding:.5rem}.post p{margin:.5rem 0}.post h1,.post h2,.post h3,.post h4{margin:1rem 0}.post h2:first-child,.project h2:first-child,.photo h2:first-child{margin-top:0}.meta{margin:2rem 0}code,pre{background:#ecedee}code{padding:.1rem}pre code{border:none}pre{padding:1rem;overflow-x:auto}img{max-width:100%}hr{background:#000;height:1px;border:0}header{flex-basis:10rem;flex-grow:1;position:relative}header a{text-decoration:none}header li{margin-bottom:.2rem;text-align:right;margin-right:2rem}header a.active{font-weight:bold}header,section{padding:1rem}blockquote{font-style:italic;border-left:5px solid #ececec;padding-left:1rem}h1,h2,h3,h4,h5{line-height:1;margin:1rem 0;font-weight:600}section h1:first-child{margin-top:0}strong,b{font-weight:bold}.photos ul{list-style:none}.photos li{margin-bottom:1.5rem}.photo picture,.project picture{margin-bottom:0.5rem}.posts ul,header ul{list-style:none}.posts li{align-items:center;display:flex;justify-content:space-between;margin-bottom:.5rem}.posts li a,.posts li div,.projects li a{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;text-decoration:none}.posts li time,.projects li time{padding-left:1rem;white-space:nowrap;font-variant-numeric:tabular-nums}main{display:flex;flex-wrap:wrap;max-width:60rem;margin:2rem auto;padding:1rem}@media screen and (max-width: 45rem){header li{display:inline;margin-right:1rem}.logo{padding-bottom:1rem}header ul{border-bottom:1px solid #edf2f7;padding-bottom:2rem}nav ul{border-right:0px}.photos ul{margin-top:0.5rem}}section{flex-basis:0;flex-grow:999;min-width:70%;display:flex;flex-direction:column}figcaption{font-size:smaller}#share-bar{font-size:20px}#share-bar h4{margin-bottom:10px;font-weight:500}.share-button{margin:0px;margin-bottom:10px;margin-right:3px;border:1px solid #D3D6D2;padding:5px 10px 5px 10px}.share-button:hover{opacity:1;color:#ffffff}.fa-facebook-official{color:#3b5998}.fa-facebook-official:hover{background-color:#3b5998}.fa-twitter{color:#55acee}.fa-twitter:hover{background-color:#55acee}.fa-google-plus{color:#dd4b39}.fa-google-plus:hover{background-color:#dd4b39}.fa-pinterest-p{color:#cb2027}.fa-pinterest-p:hover{background-color:#cb2027}.fa-tumblr{color:#32506d}.fa-tumblr:hover{background-color:#32506d}.fa-reddit-alien{color:#ff4500}.fa-reddit-alien:hover{background-color:#ff4500}.fa-linkedin{color:#007bb5}.fa-linkedin:hover{background-color:#007bb5}.fa-envelope{color:#444444}.fa-envelope:hover{background-color:#444444}</style></head><body><main role="main"><header role="banner"><h1 class="logo">The Data Guy</h1><div class="page-author h-card p-author"><img src="/assets/circle-cropped.png" class="author-avatar u-photo" alt="Bhuvanesh"></div><nav role="navigation"><ul><li><a href="/" >Home</a></li><li><a href="/posts/" >Posts</a></li><li><a href="/categories/" >Categories</a></li><li><a href="/tags/" >Tags</a></li><li><a href="https://medium.com/@bhuvithedataguy" >Medium Blog</a></li><li><a href="/search" >Search Here</a></li></ul></nav></header><section class="post"><h2>SQLServer Backup with dbatools vs Olahallengren</h2><p><img src="/assets/SQLServer-Backup-with-dbatools-vs-Olahallengren.jpeg" alt="SQLServer Backup with dbatools vs Olahallengren" /></p><blockquote><p><strong>Short Story:</strong> The <a href="https://dbatools.io/">dbatools </a>is growing too fast, so many Powershell modules are there. I just compared the backup module with Ola Hallengren’s backup script.</p></blockquote><p>Who all are working as a SQL Server DBA, we must be scheduled the backup job in SQL Agent with our own TSQL scripts. But most of the DBAs are recommended to use Ola hallengren’s backup script. Because it gives us a reliable backup and easy to locate the backup files. I’m also a fan of Ola’s script. Im using this in my all production servers.</p><p>I had a situation to create a backup maintenance job without SQL agent. Oh god, this is not fair. There are so many ways available to configure this, but without SQL agent….. there is a question mark. OK fine, I had an Option, PowerShell in Task Scheduler. Instead of using SQL PowerShell module to take the backup, I have executed the ola’s backup commands inside the PowerShell. Yes, this is good, its working as I expected. But the problem is sometimes it didn’t work and I don’t have any logs for that. So I decided to use dbatools. I have compared many options with ola’s scripts. Lets see the results.</p><p>I have AdventureWorks and WideWorldImporters database on my computer and I have SSD Storage.</p><p><strong>Backup Folder:</strong></p><p>In Ola’s scripts creates the backup folders as more predictable. Its pretty good to find a backup file. dbatools are has this option but it doesn’t create a folder based on backup type.</p><p> <img src="/assets/SQLServer-Backup-with-dbatools-vs-Olahallengren1.jpeg" alt="SQLServer Backup with dbatools vs Olahallengren" /></p><p><strong>Backup Time:</strong></p><p>Ola’s backup took 5 sec to take the backup, dbatools took <em>10sec</em>. Oh its pretty slow.</p><p><strong>Backup File Names:</strong></p><p>In Ola’s scripts, the backup file contains a keyword for backup types, like Full, Diff. dbatools doesn’t have this one. It just creates the file like <em>Datababsename_yyyymmddhhmmss.bak</em></p><p> <img src="/assets/SQLServer-Backup-with-dbatools-vs-Olahallengren2.jpeg" alt="SQLServer Backup with dbatools vs Olahallengren2" /></p><p><strong>Copy Only:</strong></p><p>dbatools is taking all the backups with Copy Only, but in Ola’s script you need to add <em>@Copyonly=’Y’</em>.</p><p><strong>Stats Message:</strong></p><p>Ola’s scripts are giving a more detailed message for backups, like Is standby, Recovery Model, Encrypted, Differential LSN, but dbatools gives limited details only.</p><p> <img src="/assets/SQLServer-Backup-with-dbatools-vs-Olahallengren3.png" alt="SQLServer Backup with dbatools vs Olahallengren2" /></p><p><strong>Cleanup:</strong></p><p>Ola’s scripts have the cleanup option in the same module, dbatools you need to execute Backup-Remove module to clean up.</p><p><strong>Verify, Checksum, Compress:</strong></p><p>These options are same on both sides.</p><p><strong>Who is the Winner?</strong></p><p>dbatools are not only for backups, its taking care a dba’s work, so we can’t say this is not good for backups, they are doing as much as they can. But ola’s scripts too good for Backups. Why?</p><ul><li>Encrypted backups</li><li>Backup to multiple locations</li><li>Backup to Azure Blob</li><li>Cleanup</li><li>Integrate with third party backup tools.</li><li>and more options.</li></ul><span class="meta"><time datetime="2017-10-19T15:08:27+00:00">October 19, 2017</time> &middot; <a href="/tags/#backup">backup</a>, <a href="/tags/#dbatools">dbatools</a>, <a href="/tags/#olahallengren">olahallengren</a>, <a href="/tags/#powershell">powershell</a>, <a href="/tags/#sqlserver">sqlserver</a></span><hr> <!--<span class="meta"><time datetime="2017-10-19T15:08:27+00:00">October 19, 2017</time> &middot; <a class="post" href="/tag/backup">backup</a>, <a class="post" href="/tag/dbatools">dbatools</a>, <a class="post" href="/tag/olahallengren">olahallengren</a>, <a class="post" href="/tag/powershell">powershell</a>, <a class="post" href="/tag/sqlserver">sqlserver</a></span> --></section></main></body></html>
